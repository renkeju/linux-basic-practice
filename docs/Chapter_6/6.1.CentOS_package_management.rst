==========================
6.1 CentOS 包管理
==========================

什么是包管理
--------------------

许多软件都可以在不同的Linux发行版本中使用。
一言以蔽之，软件除了提供软件程序本身的功能以外，还需要程序所依赖使用的库文件、软件文档等。
因此，Linux各种发行版本将这些集合视作一个称为包的单元。

.. image:: /images/Chapter_6/6-1-1.包.drawio.png
    :align: center

安装（installing）和删除（uninstalling）uninstalling软件称为包的管理。
通过使用包管理，您可以轻松地查看当前安装的软件的详细信息，检查软件之间的依赖关系，并避免软件之间的冲突。

包依赖是一种关系，其意为必须先安装包B才能安装包A，才能使包A工作。
如果您在尚未安装包B时尝试安装包A，您的包管理系统将因为依赖问题而报告错误。

如第一章所述，Redhat（CentOS）和Ubuntu/Debian系有不同的包管理器。

+------------------------+--------------+-----------------+
|                        | RadHat系     | Ubuntu/Debian系 |
+========================+==============+=================+
| 包形式                 | rpm          | deb             |
+------------------------+--------------+-----------------+
| 包管理形式             | rpm 命令     | dpkg 命令       |
+------------------------+--------------+-----------------+
| 使用存储库的包管理命令 | yum(dnf)命令 | apt 命令        |
+------------------------+--------------+-----------------+

首先对RedHat(CentOS)系进行说明。rpm和yum都是包管理的命令，它们的区别如下。

* rpm 命令

    单独管理每个软件包。依赖关系不会自动解析匹配，但会显示起所依赖包的信息。

* yum 命令

    浏览存储库，管理当前安装包的依赖包。其依赖关系会自动解决。

如果您需要明确指定要使用并安装的包的版本，使用 rpm 命令更加合适。
但是，您必须单独指定所需的包并注意它们的安装顺序。
另一方面，yum命令会根据当前使用的操作系统版本安装相应的版本和依赖包。

使用rpm命令
-------------------

rpm命令用于管理rpm包。

.. code-block:: 

    rpm [选项] 包名称

查看包信息
^^^^^^^^^^^^^^^^^^^^

要查看和打印有关 rpm 包的信息，请使用 rpm 命令的 “-q”(--query)选项。
要显示更加详细的信息，可以使用以下选项组合。

+-------------------+----------------------------------------------------------+
| 选项              | 说明                                                     |
+===================+==========================================================+
| -q、--query       | 如果已经安装了包，则显示软件包的版本                     |
+-------------------+----------------------------------------------------------+
| -a、--all         | 列出已安装的rpm包信息                                    |
+-------------------+----------------------------------------------------------+
| -i、--info        | 显示指定包的详细信息                                     |
+-------------------+----------------------------------------------------------+
| -f、--file        | 显示包含指定文件的 rpm 包                                |
+-------------------+----------------------------------------------------------+
| -c、--configfiles | 仅显示指定包中的配置文件                                 |
+-------------------+----------------------------------------------------------+
| -d、--docfiles    | 仅显示指定包中的文档                                     |
+-------------------+----------------------------------------------------------+
| -l、--list        | 显示指定包中包含的所有文件                               |
+-------------------+----------------------------------------------------------+
| -K、--checksig    | 检查指定包文件中包含的所有摘要值和签名，以验证包的完整性 |
+-------------------+----------------------------------------------------------+
| -R、--requires    | 显示指定包依赖的rpm包名                                  |
+-------------------+----------------------------------------------------------+
| -p、--packages    | 显示指定 rpm 包文件的信息而不是已安装的 rpm 包           |
+-------------------+----------------------------------------------------------+
| --changelog       | 显示包更新信息                                           |
+-------------------+----------------------------------------------------------+

下面是使用带有各种选项的 rpm 命令来显示包信息的实例：

指定包名称以显示有关包的详细信息。

