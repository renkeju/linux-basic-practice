
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>4.2 注册、删除和修改组 &#8212; 《Linux 基础实践入门》 alpha 文档</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
<link rel="stylesheet" type="text/css" href="../_static/handsontable.full.min.css">
<script src="../_static/handsontable.full.min.js"></script>

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>4.2 注册、删除和修改组<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<div class="section" id="id2">
<h2>什么是组<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>用户必须至少属于一个组。有两种类型的组：主组和辅助组。用户必须分配一个主组，辅助组则是可选的。</p>
<p>用户可以使用groups命令查看他们所属的组。通过在参数中指定用户名，可以查看用户所属的组。groups命令引用 <code class="docutils literal notranslate"><span class="pre">/etc/groups</span></code> 文件。</p>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>有关 groups 命令的详细信息，请参见第三章。</p>
</div>
<p>以下是用户 yuko 和 sam 所属的组的 groups 命令的示例：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># groups sam
sam : sam
# groups yuko
yuko : yuko users
$ grep yuko /etc/passwd
yuko:x:1002:1002:,,,:/home/yuko:/bin/bash
# grep yuko /etc/group
users:x:100:yuko,ryo
yuko:x:1002:
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>创建组<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>要注册新组，请使用 groupadd 命令。此命令必须具有 root 权限才能运行。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>groupadd [-g 组ID] 组名称
</pre></div>
</div>
<p>以下是root创建“pg”组的示例：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># groupadd pg
# tail -1 /etc/group
pg:x:1006:
# tail -1 /etc/gshadow
pg:!::
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">/etc/gshadow</span></code> 是一个文件，用于设置用户为加入其未注册的组而运行newgrp命令时的密码。</p>
</div>
<div class="section" id="id4">
<h2>删除组<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>要删除组，请使用groupdel命令，此命令必须具有root权限才能运行。groupdel命令的参数必须是组名。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>groupdel 组名称
</pre></div>
</div>
<p>以下是root删除“pg”组的示例：</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># groupdel pg
# tail /etc/group | grep pg
# tail /etc/gshadow | grep pg
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2>变更所属组<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<p>更改用户的主组时，请使用 usermod 命令的 “-g” 选项。如果要将用户加入多个组（辅助组），请使用 useradd 命令的“-G”选项和 usermod 命令的“-G”选项。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># id sam ⬅ ①
uid=1001(sam) gid=1001(sam) groups=1001(sam) ⬅ ②
# grep users /etc/groups ⬅ ③
users:x:100:yuko,ryo ⬅ ④
# usermod -G users sam ⬅ ⑤
# id sam
uid=1001(sam) gid=1001(sam) groups=1001(sam),100(users) ⬅ ⑥
# grep users /etc/group ⬅ ⑦
users:x:100:yuko,ryo,sam ⬅ ⑧
</pre></div>
</div>
<p>① 显示用户 sam 信息</p>
<p>② 属于 sam(GID为1001) 作为主组</p>
<p>③ 显示用户组信息</p>
<p>④ ryo 和 yuko 属于 users 组</p>
<p>⑤ 用户 sam 作为辅助组加入 users</p>
<p>⑥ users 被添加到辅助组</p>
<p>⑦ 显示用户组信息</p>
<p>⑧ 添加了用户 sam</p>
<p>如果要更改组的用户已属于辅助组，则“-G”选项将替换为指定的组。如果要将多个组作为辅助组，请使用“-aG”选项。</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># id sam ⬅ ①
uid=1001(sam) gid=1001(sam) groups=1001(sam),100(users) ⬅ ②
# usermod -G wheel sam ⬅ ③
# id sam
uid=1001(sam) gid=1001(sam) groups=1001(sam),10(wheel) ⬅ ④
# usermod -aG users sam ⬅ ⑤
# id sam
uid=1001(sam) gid=1001(sam) groups=1001(sam),10(wheel),100(users) ⬅ ⑥
</pre></div>
</div>
<p>① 显示用户 sam 信息</p>
<p>② 辅助组为users</p>
<p>③ 在“-G”选项中作为辅助组加入“wheel”</p>
<p>④ 辅助组由users替换为wheel</p>
<p>⑤ 使用“-aG”选项将users添加为辅助组</p>
<p>⑥ 作为辅助组加入 wheel 和 users</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/linux.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">《Linux 基础实践入门》</a></h1>








<h3>导航</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_1/1.Linux_overview.html">第一章 Linux 概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_2/2.start_and_stop_linux.html">第二章 Linux的启动和停止</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_3/3.opration_and_use_of_files.html">第三章 文件的操作与使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="4.Register_modify_delete_user.html">第四章 管理用户</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Chapter_5/5.Execute_scripts_and_tasks.html">第五章 执行脚本和任务</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Appendix_A/A.Create_a_virtual_environment.html">附录A 创建虚拟环境</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, renkeju.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>